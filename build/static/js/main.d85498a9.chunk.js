(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{347:function(e,t,a){e.exports=a.p+"static/media/blockstack-icon.f96bc90c.svg"},348:function(e,t,a){e.exports=a.p+"static/media/logo-blackweb.fcde0888.png"},367:function(e,t,a){e.exports=a(783)},372:function(e,t,a){},374:function(e,t,a){},376:function(e,t,a){},403:function(e,t){},404:function(e,t){},424:function(e,t){},426:function(e,t){},637:function(e,t){},783:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(15),c=a.n(o),l=(a(372),a(90)),r=a(91),s=a(92),d=a(93),u=a(96),h=a(31),m=(a(374),function(e){function t(e){return Object(l.a)(this,t),Object(s.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"UserInfo"},i.a.createElement("img",{class:"avatar",src:this.props.user&&this.props.user.image?this.props.user.image[0].contentUrl:"/noprofilepicture.png"}),i.a.createElement("h1",null,this.props.user&&this.props.user.name))}}]),t}(n.Component)),g=a(786),f=a(789),p=a(785),k=a(215),v=a(787),b=a(27),E=a(788),S=(a(376),a(153)),y="USER_LOGIN_DATA";a(382);var O=a(347),I=a.n(O),w=a(348),C=a.n(w),j=a(154),D=a(225),N=g.a.Meta,A=a(758),_=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){a.setState({revokedIsVisible:!0,blockStackModalIsVisible:!0})},a.handleOk=function(){a.setState({loading:!1,revokedIsVisible:!1})},a.handleCancel=function(){a.setState({revokedIsVisible:!1})},a.showRevokeModal=function(){a.setState({revokeCertificateIsVisible:!0})},a.showBlockStackModal=function(){a.setState({blockStackModalIsVisible:!0})},a.handleblockStackModalOk=function(){a.setState({loading:!0});var e=Object(h.a)(Object(h.a)(a));A.put("https://encert-server.herokuapp.com/issuer/participant/",{blockstack_id:a.state.blockstackIdentity,email:a.state.blockStackEmail}).then(function(t){console.log("Server returned response for info insertion: ",t),e.showMessage("Data submitted. Redirecting...","success"),e.setState({loading:!1,blockStackModalIsVisible:!1})}).catch(function(t){console.log("Error inserting data: ",t),e.showMessage("Error submitting data. Please check your information and retry.","error"),e.setState({loading:!1})})},a.handleblockStackModalCancel=function(){a.setState({blockStackModalIsVisible:!1})},a.onBlockStackModalNameChange=function(e){console.log("Received Input: ",e.target.value),a.setState({blockStackName:e.target.value})},a.onBlockStackModalEmailChange=function(e){console.log("Received Input: ",e.target.value),a.setState({blockStackEmail:e.target.value})},a.handleBlockStackModalSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?console.log("Validation succeeded! Submitting form."):console.log("Received values of form: ",t)})},a.showMessage=function(e,t){"success"==t?f.a.success(e,5e3):"warning"==t?f.a.warning(e,5e3):"error"==t&&f.a.error(e,5e3)};var n=a.checkSignedInStatus();return a.state={certificates:[],isSignedIn:n,person:void 0,revokedIsVisible:!1,blockStackModalIsVisible:!1,userIdentity:!1,blockstackIdentity:"",blockStackEmail:"",blockStackName:"",displayCertificates:null,clickedCertificate:{ID:"",achievementTitle:"",domain:"",coverImage:"",receiverName:"",blockstackID:"",issuerName:"",description:"",issueDate:"",revokedDate:"",reason:"",expirationDate:""}},n&&a.loadPerson(),a.handleSignIn=a.handleSignIn.bind(Object(h.a)(Object(h.a)(a))),a.handleSignOut=a.handleSignOut.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"checkSignedInStatus",value:function(){return!!D.isUserSignedIn()||(D.isSignInPending()?(D.handlePendingSignIn().then(function(e){window.location=window.location.origin}),!1):void 0)}},{key:"loadPerson",value:function(){var e=D.loadUserData().username;console.log(D.loadUserData(),"user data");var t=D.loadUserData();if(t.identityAddress){var a=this;A.get("https://encert-server.herokuapp.com/issuer/participant/exist/".concat(t.identityAddress),{}).then(function(n){console.log("Data exists for blockstack ID in server : ",n.data.data.result),n.data.data.result||a.setState({blockStackModalIsVisible:!0}),D.lookupProfile(e).then(function(e){a.setState({person:e}),console.log("LOOKUP RETURNS: ",e),a.props.USER_DATA(t)}),A.get("https://encert-server.herokuapp.com/issuer/certificate/blockstack/"+t.identityAddress).then(function(e){var t=this;console.log("Certificate Array is: ",e.data.data.results),console.log("CERTIFICATES: "+e.data.data.results);var n=e.data.data.results,o=n.map(function(e){return i.a.createElement(j.Col,{md:3,sm:12},i.a.createElement(g.a,{onClick:function(){return t.showModal()},cover:i.a.createElement("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"})},i.a.createElement(N,{avatar:i.a.createElement(p.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.achievement_title,description:"This is the description"})))});a.setState({certificates:n,displayCertificates:o}),console.log(a.state)}).catch(function(e){console.log(e)}),console.log(a.state,"state"),a.setState({userIdentity:!0,blockstackIdentity:t.identityAddress})}).catch(function(e){console.log("Error while fetching identity from server. ",e)})}else alert("No identity found in server.")}},{key:"handleSignIn",value:function(e){e.preventDefault(),D.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),D.signUserOut(window.location.href)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h1",{className:"App-title"},"Encert")),i.a.createElement("div",{className:"signin-container",style:{display:this.state.isSignedIn?"none":"block"}},i.a.createElement("div",null,i.a.createElement("img",{className:"logo",src:C.a})),i.a.createElement(k.a,{className:"signin-btn",onClick:this.handleSignIn},i.a.createElement("img",{className:"blockstack-logo",src:I.a}),i.a.createElement("span",{className:"signin-btn-text"},"Sign-in with Blockstack"))),i.a.createElement("div",{style:{display:this.state.isSignedIn?"absolute":"none"}},this.state.blockStackModalIsVisible?i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(v.a,{placeholder:"Enter your email address",prefix:i.a.createElement(b.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.onBlockStackModalEmailChange}),i.a.createElement(k.a,{type:"primary",loading:this.state.loading,onClick:this.handleblockStackModalOk},"Click me!"))):i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(m,{user:this.state.person}),i.a.createElement("button",{onClick:this.handleSignOut},"Sign-out")),i.a.createElement("br",null),i.a.createElement(j.Container,null,i.a.createElement(j.Row,null,this.state.displayCertificates)),i.a.createElement("br",null))),i.a.createElement("div",null,i.a.createElement(E.a,{visible:this.state.revokedIsVisible,title:"Revoked Certificate Details",onOk:this.handleOk,onCancel:this.handleCancel,footer:[i.a.createElement(k.a,{key:"submit",type:"primary",onClick:this.handleOk},"OK")]},i.a.createElement("p",null,"ID: ".concat(this.state.clickedCertificate.ID)),i.a.createElement("p",null,"Achievement Title:  ".concat(this.state.clickedCertificate.achievementTitle)),i.a.createElement("p",null,"Domain:  ".concat(this.state.clickedCertificate.domain)),i.a.createElement("p",null,"Cover Image: ".concat(this.state.clickedCertificate.coverImage)),i.a.createElement("p",null,"Receiver Name: ".concat(this.state.clickedCertificate.receiverName)),i.a.createElement("p",null,"Blockstack ID: ".concat(this.state.clickedCertificate.blockstackID)),i.a.createElement("p",null,"Issuer Name: ".concat(this.state.clickedCertificate.issuerName)),i.a.createElement("p",null,"Description: ".concat(this.state.clickedCertificate.description)),i.a.createElement("p",null,"Issue Date: ".concat(this.state.clickedCertificate.issueDate)),i.a.createElement("p",null,"Expiration Date: ".concat(this.state.clickedCertificate.expirationDate)))))}}]),t}(n.Component);var M=Object(S.b)(null,function(e){return{USER_DATA:function(t){var a;e((a=t,console.log(a),{type:y,payload:a}))}}})(_),T=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function x(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var R=a(363),V=a(214),U=a(362),B=a.n(U)()(),L=a(225),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).handleSignOut=a.handleSignOut.bind(Object(h.a)(Object(h.a)(a))),a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"handleSignOut",value:function(e){e.preventDefault(),L.signUserOut(window.location.href)}},{key:"render",value:function(){return console.log("here"),i.a.createElement("div",null,"Home page",i.a.createElement("p",{style:{display:this.state.isSignedIn?"block":"none"}},i.a.createElement(m,{user:this.state.person}),i.a.createElement("button",{onClick:this.handleSignOut},"Sign-out")))}}]),t}(n.Component),G=function(){return i.a.createElement(R.a,{history:B},i.a.createElement("div",null,i.a.createElement(V.a,{exact:!0,path:"/",component:M}),i.a.createElement(V.a,{exact:!0,path:"/home",component:P})))},J=a(76),W=a(77),q="LOGGEDIN",H="LOGGED_OUT",z="EDIT_OBJ",F="CONTACT_EDIT_DATA";var K={email:"",is_login:!1,token:""},X="EVENT_DETAILS";var Y={edit_obj:{}},$={contact_data:{}},Q={user_data:{}},Z=Object(J.c)({user_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(W.a)({},e,{email:t.payload.user.email,token:t.payload.token,is_login:!0});case H:return Object(W.a)({},e,{is_login:!1});default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(W.a)({},t.payload);case z:return{edit_obj:t.payload};default:return e}},contact_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(console.log("===================================="),console.log(t.payload),console.log("===================================="),t.type){case F:return Object(W.a)({},e,{contact_data:t.payload});default:return e}},signIn_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return console.log(t.payload),{user_data:t.payload};default:return e}}}),ee=a(364);var te=function(){try{var e=sessionStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){console.log(t)}}(),ae=Object(J.d)(Z,te,Object(J.a)(ee.a));ae.subscribe(function(){!function(e){try{var t=JSON.stringify(e);sessionStorage.setItem("state",t)}catch(a){console.log(a)}}(ae.getState())});var ne=ae;c.a.render(i.a.createElement(S.a,{store:ne},"  ",i.a.createElement(G,null)," "),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");T?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):x(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):x(e)})}}()}},[[367,2,1]]]);
//# sourceMappingURL=main.d85498a9.chunk.js.map