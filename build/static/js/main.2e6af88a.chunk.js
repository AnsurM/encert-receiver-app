(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{344:function(e,t,a){e.exports=a.p+"static/media/blockstack-icon.f96bc90c.svg"},345:function(e,t,a){e.exports=a.p+"static/media/logo-blackweb.fcde0888.png"},364:function(e,t,a){e.exports=a(783)},369:function(e,t,a){},371:function(e,t,a){},373:function(e,t,a){},401:function(e,t){},402:function(e,t){},423:function(e,t){},425:function(e,t){},636:function(e,t){},783:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),c=a(15),o=a.n(c),l=(a(369),a(91)),s=a(92),r=a(93),d=a(94),u=a(97),m=a(30),h=(a(371),function(e){function t(e){return Object(l.a)(this,t),Object(r.a)(this,Object(d.a)(t).call(this,e))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"UserInfo"},i.a.createElement("img",{class:"avatar",src:this.props.user&&this.props.user.image?this.props.user.image[0].contentUrl:"/noprofilepicture.png"}),i.a.createElement("h1",null,this.props.user&&this.props.user.name))}}]),t}(n.Component)),p=a(786),k=a(789),g=a(785),f=a(214),v=a(787),b=a(36),E=a(788),S=(a(373),a(154)),I="USER_LOGIN_DATA";a(379);var y=a(344),O=a.n(y),C=a(345),w=a.n(C),D=a(155),j=a(224),N=p.a.Meta,_=a(758),A=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).showModal=function(){a.setState({revokedIsVisible:!0,blockStackModalIsVisible:!0})},a.handleOk=function(){a.setState({loading:!1,revokedIsVisible:!1})},a.handleCancel=function(){a.setState({revokedIsVisible:!1})},a.showRevokeModal=function(){a.setState({revokeCertificateIsVisible:!0})},a.showBlockStackModal=function(){a.setState({blockStackModalIsVisible:!0})},a.handleblockStackModalOk=function(){a.setState({loading:!0});var e=Object(m.a)(Object(m.a)(a));_.put("https://encert-server.herokuapp.com/issuer/participant/",{blockstack_id:a.state.blockstackIdentity,email:a.state.blockStackEmail}).then(function(t){console.log("Server returned response for info insertion: ",t),e.showMessage("Data submitted. Redirecting...","success"),e.setState({loading:!1,blockStackModalIsVisible:!1})}).catch(function(t){console.log("Error inserting data: ",t),e.showMessage("Error submitting data. Please check your information and retry.","error"),e.setState({loading:!1})})},a.handleblockStackModalCancel=function(){a.setState({blockStackModalIsVisible:!1})},a.onBlockStackModalNameChange=function(e){console.log("Received Input: ",e.target.value),a.setState({blockStackName:e.target.value})},a.onBlockStackModalEmailChange=function(e){console.log("Received Input: ",e.target.value),a.setState({blockStackEmail:e.target.value})},a.handleBlockStackModalSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e?console.log("Validation succeeded! Submitting form."):console.log("Received values of form: ",t)})},a.showMessage=function(e,t){"success"==t?k.a.success(e,5e3):"warning"==t?k.a.warning(e,5e3):"error"==t&&k.a.error(e,5e3)};var n=a.checkSignedInStatus();return a.state={certificates:[],isSignedIn:n,person:void 0,revokedIsVisible:!1,blockStackModalIsVisible:!1,userIdentity:!1,blockstackIdentity:"",blockStackEmail:"",blockStackName:"",displayCertificates:null,clickedCertificate:{ID:"",achievementTitle:"",domain:"",coverImage:"",receiverName:"",blockstackID:"",issuerName:"",description:"",issueDate:"",revokedDate:"",reason:"",expirationDate:""}},n&&a.loadPerson(),a.handleSignIn=a.handleSignIn.bind(Object(m.a)(Object(m.a)(a))),a.handleSignOut=a.handleSignOut.bind(Object(m.a)(Object(m.a)(a))),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"checkSignedInStatus",value:function(){return!!j.isUserSignedIn()||(j.isSignInPending()?(j.handlePendingSignIn().then(function(e){window.location=window.location.origin}),!1):void 0)}},{key:"loadPerson",value:function(){var e=j.loadUserData().username;console.log(j.loadUserData(),"user data");var t=j.loadUserData();if(t.identityAddress){var a=this;_.get("https://encert-server.herokuapp.com/issuer/participant/exist/".concat(t.identityAddress),{}).then(function(n){console.log("Data exists for blockstack ID in server : ",n.data.data.result),n.data.data.result||a.setState({blockStackModalIsVisible:!0}),j.lookupProfile(e).then(function(e){a.setState({person:e}),console.log("LOOKUP RETURNS: ",e),a.props.USER_DATA(t)}),_.get("https://encert-server.herokuapp.com/issuer/certificate/blockstack/"+t.identityAddress).then(function(e){var t=this;console.log("Certificate Array is: ",e.data.data.results),console.log("CERTIFICATES: "+e.data.data.results);var n=e.data.data.results,c=n.map(function(e){return i.a.createElement(D.Col,{md:3,sm:12},i.a.createElement(p.a,{onClick:function(){return t.showModal()},cover:i.a.createElement("img",{alt:"example",src:"https://gw.alipayobjects.com/zos/rmsportal/JiqGstEfoWAOHiTxclqi.png"})},i.a.createElement(N,{avatar:i.a.createElement(g.a,{src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),title:e.achievement_title,description:"This is the description"})))});a.setState({certificates:n,displayCertificates:c}),console.log(a.state)}).catch(function(e){console.log(e)}),console.log(a.state,"state"),a.setState({userIdentity:!0,blockstackIdentity:t.identityAddress})}).catch(function(e){console.log("Error while fetching identity from server. ",e)})}else alert("No identity found in server.")}},{key:"handleSignIn",value:function(e){e.preventDefault(),j.redirectToSignIn()}},{key:"handleSignOut",value:function(e){e.preventDefault(),j.signUserOut(window.location.href)}},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("header",{className:"App-header"},i.a.createElement("h1",{className:"App-title"},"Encert")),i.a.createElement("div",{className:"signin-container",style:{display:this.state.isSignedIn?"none":"block"}},i.a.createElement("div",null,i.a.createElement("img",{className:"logo",src:w.a})),i.a.createElement(f.a,{className:"signin-btn",onClick:this.handleSignIn},i.a.createElement("img",{className:"blockstack-logo",src:O.a}),i.a.createElement("span",{className:"signin-btn-text"},"Sign-in with Blockstack"))),i.a.createElement("div",{style:{display:this.state.isSignedIn?"absolute":"none"}},this.state.blockStackModalIsVisible?i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(v.a,{placeholder:"Enter your email address",prefix:i.a.createElement(b.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),onChange:this.onBlockStackModalEmailChange}),i.a.createElement(f.a,{type:"primary",loading:this.state.loading,onClick:this.handleblockStackModalOk},"Click me!"))):i.a.createElement("div",null,i.a.createElement("div",null,i.a.createElement(h,{user:this.state.person}),i.a.createElement("button",{onClick:this.handleSignOut},"Sign-out")),i.a.createElement("br",null),i.a.createElement(D.Container,null,i.a.createElement(D.Row,null,this.state.displayCertificates)),i.a.createElement("br",null))),i.a.createElement("div",null,i.a.createElement(E.a,{visible:this.state.revokedIsVisible,title:"Revoked Certificate Details",onOk:this.handleOk,onCancel:this.handleCancel,footer:[i.a.createElement(f.a,{key:"submit",type:"primary",onClick:this.handleOk},"OK")]},i.a.createElement("p",null,"ID: ".concat(this.state.clickedCertificate.ID)),i.a.createElement("p",null,"Achievement Title:  ".concat(this.state.clickedCertificate.achievementTitle)),i.a.createElement("p",null,"Domain:  ".concat(this.state.clickedCertificate.domain)),i.a.createElement("p",null,"Cover Image: ".concat(this.state.clickedCertificate.coverImage)),i.a.createElement("p",null,"Receiver Name: ".concat(this.state.clickedCertificate.receiverName)),i.a.createElement("p",null,"Blockstack ID: ".concat(this.state.clickedCertificate.blockstackID)),i.a.createElement("p",null,"Issuer Name: ".concat(this.state.clickedCertificate.issuerName)),i.a.createElement("p",null,"Description: ".concat(this.state.clickedCertificate.description)),i.a.createElement("p",null,"Issue Date: ".concat(this.state.clickedCertificate.issueDate)),i.a.createElement("p",null,"Expiration Date: ".concat(this.state.clickedCertificate.expirationDate)))))}}]),t}(n.Component);var M=Object(S.b)(null,function(e){return{USER_DATA:function(t){var a;e((a=t,console.log(a),{type:I,payload:a}))}}})(A);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(360),a(213);var T=a(359),V=(a.n(T)()(),a(224)),R=(n.Component,a(77)),x=a(78),U="LOGGEDIN",B="LOGGED_OUT",P="EDIT_OBJ",G="CONTACT_EDIT_DATA";var J={email:"",is_login:!1,token:""},L="EVENT_DETAILS";var q={edit_obj:{}},z={contact_data:{}},F={user_data:{}},H=Object(R.c)({user_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return Object(x.a)({},e,{email:t.payload.user.email,token:t.payload.token,is_login:!0});case B:return Object(x.a)({},e,{is_login:!1});default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return Object(x.a)({},t.payload);case P:return{edit_obj:t.payload};default:return e}},contact_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(console.log("===================================="),console.log(t.payload),console.log("===================================="),t.type){case G:return Object(x.a)({},e,{contact_data:t.payload});default:return e}},signIn_reducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return console.log(t.payload),{user_data:t.payload};default:return e}}}),K=a(361);var X=function(){try{var e=sessionStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){console.log(t)}}(),W=Object(R.d)(H,X,Object(R.a)(K.a));W.subscribe(function(){!function(e){try{var t=JSON.stringify(e);sessionStorage.setItem("state",t)}catch(a){console.log(a)}}(W.getState())});var Y=W;o.a.render(i.a.createElement(S.a,{store:Y},"  ",i.a.createElement(M,null)," "),document.getElementById("root"))}},[[364,2,1]]]);
//# sourceMappingURL=main.2e6af88a.chunk.js.map